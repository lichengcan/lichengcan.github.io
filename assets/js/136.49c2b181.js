(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{551:function(t,e,a){"use strict";a.r(e);var s=a(2),r=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"_1-提取geometry数据中心的一个点数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-提取geometry数据中心的一个点数据"}},[t._v("#")]),t._v(" 1 提取geometry数据中心的一个点数据")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("update tb_nzw_cybchjc set lon =st_X(ST_Centroid(geom)), lat=st_y(st_centroid(geom)\n")])])]),e("h2",{attrs:{id:"_2-删除id、time都相同的重复数据-只保留一条"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-删除id、time都相同的重复数据-只保留一条"}},[t._v("#")]),t._v(" 2 删除id、time都相同的重复数据，只保留一条")]),t._v(" "),e("p",[t._v("1、没有唯一标识的情况")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("//创建临时表\n\n-- Create a temporary table to store the duplicate rows\nCREATE TEMPORARY TABLE temp_duplicates AS\nSELECT id, time\nFROM your_table\nGROUP BY id, time\nHAVING COUNT(*) > 1;\n\n-- Delete the duplicates from the original table using the temporary table\nDELETE FROM your_table\nWHERE (id, time) IN (SELECT id, time FROM temp_duplicates);\n\n-- Drop the temporary table\nDROP TEMPORARY TABLE temp_duplicates;\n")])])]),e("p",[t._v("2.有唯一标识 rowid")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("DELETE t1 FROM your_table t1\nJOIN your_table t2 \n  ON t1.id = t2.id AND t1.time = t2.time \n  AND t1.rowid > t2.rowid;\n")])])]),e("h2",{attrs:{id:"_3-查询结果集作为删除条件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-查询结果集作为删除条件"}},[t._v("#")]),t._v(" 3 查询结果集作为删除条件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("DELETE c\nFROM city_manage_vehicle c\nJOIN (\n    SELECT DISTINCT camera_index_code\n    FROM city_manage_vehicle\n    WHERE device_name NOT LIKE '湘%'\n) temp ON c.camera_index_code = temp.camera_index_code;\n")])])]),e("h2",{attrs:{id:"_4-过去24小时内的数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-过去24小时内的数据"}},[t._v("#")]),t._v(" 4 过去24小时内的数据")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("SELECT id, TIME_FORMAT(create_time, '%H:%i') as createTime   FROM xxxxxxtable   WHERE create_time >= DATE_SUB(NOW(), INTERVAL 24 HOUR)  \n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);