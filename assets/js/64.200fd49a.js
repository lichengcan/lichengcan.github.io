(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{480:function(t,n,a){"use strict";a.r(n);var s=a(2),r=Object(s.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"_1-线程池"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-线程池"}},[t._v("#")]),t._v(" 1 线程池")]),t._v(" "),n("h4",{attrs:{id:"小灿白话聊聊线程池"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小灿白话聊聊线程池"}},[t._v("#")]),t._v(" 小灿白话聊聊线程池")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/dz5xfKOTkBe1pXw.jpg",alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/uFtL9Y7krzN8Phg.jpg",alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/NZDqxi2tQFTwKz3.png",alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/u3ObzI57sBeDjR6.jpg",alt:""}})]),t._v(" "),n("h3",{attrs:{id:"相关代码-这里有坑后续会说"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关代码-这里有坑后续会说"}},[t._v("#")]),t._v(" 相关代码：这里有坑后续会说")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('package com.example.leetcode.ThreadPool;\n\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class ThreadPoolExecutorTest {\n\n    public static void main(String[] args) {\n\n\n        for (int j = 10; j > 0; j--) {\n            new Thread(() -> {\n                for (int i = 10; i > 0; i--) {\n                    increment();\n                    System.out.println("count = " + count);\n                }\n            }).start();\n        }\n\n\n    }\n\n    static int count = 0;\n    static ReentrantLock lock = new ReentrantLock();\n\n    public static void increment() {\n        lock.lock();\n        try {\n            count++;\n        } finally {\n            lock.unlock();\n        }\n    }\n\n}\n\n')])])]),n("h3",{attrs:{id:"这是正确加锁后的代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#这是正确加锁后的代码"}},[t._v("#")]),t._v(" 这是正确加锁后的代码：")]),t._v(" "),n("blockquote",[n("p",[t._v("上面代码有问题：")]),t._v(" "),n("p",[t._v("1.打印没有加锁")]),t._v(" "),n("p",[t._v("2.++和打印要看成一个整体")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('package com.example.leetcode.ThreadPool;\n\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class ReentrantLockTest {\n    public static void main(String[] args) {\n        for (int j = 10; j > 0; j--) {\n            new Thread(() -> {\n                for (int i = 10; i > 0; i--) {\n                    lock.lock();\n                    //这里的新增和打印需要看成一个整体，如果分开加锁，就还是会有问题呀\n                    //比如我++了，然后释放了++锁，还没来得及打印，别的线程也开始++\n                    try {\n                        increment();\n                        sout();\n                    } finally {\n                        lock.unlock();\n                    }\n                }\n            }).start();\n        }\n    }\n\n    static int count = 0;\n    static Lock lock = new ReentrantLock();\n\n    public static void increment() {\n        count++;\n    }\n\n    public static void sout() {\n        System.out.println("count = " + count);\n    }\n}\n\n')])])]),n("h3",{attrs:{id:"继续聊聊多线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#继续聊聊多线程"}},[t._v("#")]),t._v(" 继续聊聊多线程")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/huyGzOmXRZCc2WS.jpg",alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/bwrCGaxeMiqnBYU.jpg",alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/N5roblm927aScwQ.jpg",alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/rnmZsu9Kpo3hBbe.jpg",alt:""}})]),t._v(" "),n("h3",{attrs:{id:"第二天"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二天"}},[t._v("#")]),t._v(" 第二天")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/lSMx8CzEN1T9Vtn.jpg",alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/uVOPZKQASWEhqLa.png",alt:""}})]),t._v(" "),n("blockquote",[n("p",[t._v("这里我觉得有一个很妙的地方，就是这里只创建了一个全局的类变量threadLocal，却可以做到每个线程的数据都互不干扰，其原因是：当线程操作threadLocal时，线程会创建一个自己的threadLocalMap用来存储（key是threadLocal的实例，value是需要存入的值）")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/nCdxHGb4O5fDkPB.png",alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/vLiyj3BcHp74fJb.jpg",alt:""}})]),t._v(" "),n("blockquote",[n("p",[t._v("这里需要进行手动remove")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2024/02/27/PVkGjWgYpaliDr1.png",alt:""}})])])}),[],!1,null,null,null);n.default=r.exports}}]);