(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{466:function(e,t,s){"use strict";s.r(t);var r=s(2),n=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"_1-后端跨域处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-后端跨域处理"}},[e._v("#")]),e._v(" 1 后端跨域处理")]),e._v(" "),t("h3",{attrs:{id:"filter跨域过滤器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#filter跨域过滤器"}},[e._v("#")]),e._v(" filter跨域过滤器")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('import javax.servlet.*;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\n/**\n * @description 跨域过滤器\n */\npublic class CrossFilter implements Filter {\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n    }\n\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        HttpServletResponse response = (HttpServletResponse) servletResponse;\n        response.setHeader("Access-Control-Allow-Origin", "*");\n        response.setHeader("Access-Control-Allow-Methods", "*");\n        response.setHeader("Access-Control-Allow-Headers", "Origin, No-Cache, X-Requested-With, Cache-Control, Content-Type,Authorization");\n        response.setHeader("Access-Control-Max-Age", "600");\n\n        HttpServletRequest request = (HttpServletRequest) servletRequest;\n        if (request.getMethod().equals("OPTIONS")) {\n            response.setStatus(204);\n            return;\n        }\n\n        filterChain.doFilter(servletRequest, servletResponse);\n\n        response.setCharacterEncoding("UTF-8");\n        response.setContentType("application/json; charset=utf-8");\n    }\n\n    @Override\n    public void destroy() {\n    }\n}\n\n')])])]),t("h3",{attrs:{id:"注册"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注册"}},[e._v("#")]),e._v(" 注册")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('@Configuration\npublic class WebMvcConfig implements WebMvcConfigurer {\n\n    /**\n     * 注册跨域过滤器\n     */\n    @Bean("registerCrossFilter")\n    public FilterRegistrationBean registerCrossFilter() {\n        FilterRegistrationBean registration = new FilterRegistrationBean();\n        registration.setFilter(new CrossFilter());\n        registration.addUrlPatterns("/*");\n        registration.setOrder(1);\n        return registration;\n    }\n\n')])])])])}),[],!1,null,null,null);t.default=n.exports}}]);