(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{499:function(e,n,t){"use strict";t.r(n);var s=t(2),r=Object(s.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"离线安装docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#离线安装docker"}},[e._v("#")]),e._v(" 离线安装docker")]),e._v(" "),n("p",[e._v("一、环境说明：在某些部署环境下，因为网络或者其他原因，不能在线部署，这时候就需要以离线的方式安装docker；")]),e._v(" "),n("p",[e._v("二、安装步骤：")]),e._v(" "),n("p",[e._v("1、获取docker安装文件，官方地址如下：")]),e._v(" "),n("p",[e._v("https://download.docker.com/linux/static/stable/x86_64/docker-19.03.9.tgz\n2、将下载的安装文件进行解压，命令如下：")]),e._v(" "),n("p",[e._v("tar zxvf docker-19.03.9.tgz\n3、将上述解压后文件（docker文件夹）全部移动至/usr/bin目录下（必须），命令如下：")]),e._v(" "),n("p",[e._v("cp -p docker/* /usr/bin\n4、将docker注册为service，步骤如下：")]),e._v(" "),n("p",[e._v("①输入如下命令：")]),e._v(" "),n("p",[e._v("vi /usr/lib/systemd/system/docker.service\n②点击i，下面出现-----insert----进入编辑状态")]),e._v(" "),n("p",[e._v("复制下面内容至docker.service，复制内容如下：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("[Unit]\nDescription=Docker Application Container Engine\nDocumentation=http://docs.docker.com\nAfter=network.target docker.socket\n[Service]\nType=notify\nEnvironmentFile=-/run/flannel/docker\nWorkingDirectory=/usr/local/bin\nExecStart=/usr/bin/dockerd \\\n                -H tcp://0.0.0.0:4243 \\\n                -H unix:///var/run/docker.sock \\\n                --selinux-enabled=false \\\n                --log-opt max-size=1g\nExecReload=/bin/kill -s HUP $MAINPID\n# Having non-zero Limit*s causes performance problems due to accounting overhead\n# in the kernel. We recommend using cgroups to do container-local accounting.\nLimitNOFILE=infinity\nLimitNPROC=infinity\nLimitCORE=infinity\n# Uncomment TasksMax if your systemd version supports it.\n# Only systemd 226 and above support this version.\n#TasksMax=infinity\nTimeoutStartSec=0\n# set delegate yes so that systemd does not reset the cgroups of docker containers\nDelegate=yes\n# kill only the docker process, not all processes in the cgroup\nKillMode=process\nRestart=on-failure\n[Install]\nWantedBy=multi-user.target\n")])])]),n("p",[e._v("复制完成之后，点击esc键，并输入:wq!保存并强制退出；")]),e._v(" "),n("p",[e._v("可执行如下命令，查看上述复制内容是否正确")]),e._v(" "),n("p",[e._v("cat /usr/lib/systemd/system/docker.service\n5、重新加载docker配置文件，命令如下：")]),e._v(" "),n("p",[e._v("$ systemctl daemon-reload\n6、启动docker，命令如下：")]),e._v(" "),n("p",[e._v("$ systemctl start docker\n7、设置docker开机启动，命令如下：")]),e._v(" "),n("p",[e._v("$ systemctl enable docker\n8、查看docker是否安装成功，命令如下：")]),e._v(" "),n("p",[e._v("$ docker version")])])}),[],!1,null,null,null);n.default=r.exports}}]);